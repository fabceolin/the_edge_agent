# Cross-Runtime Parity Test: CLP(FD) Multiple Solutions
# Tests that both runtimes return the same FIRST solution
# Expected: Identical first solution using default labeling order

name: parity-clpfd-multiple
description: CLP(FD) constraints with multiple solutions - verify first solution parity

state_schema:
  min_val: int
  max_val: int
  target_sum: int

nodes:
  - name: solve_first_solution
    language: prolog
    run: |
      % Read bounds from state
      state(min_val, Min),
      state(max_val, Max),
      state(target_sum, Target),

      % Define CLP(FD) variables
      X in Min..Max,
      Y in Min..Max,

      % Constraint: X + Y = Target
      X + Y #= Target,

      % Use default labeling (leftmost variable first, smallest value first)
      % This ensures deterministic first solution across runtimes
      labeling([leftmost], [X, Y]),

      % Verify the first solution (X=1, Y=5 for sum=6, range 1..5)
      X = 1, Y = 5.

edges:
  - from: __start__
    to: solve_first_solution
  - from: solve_first_solution
    to: __end__

# Initial state
# Multiple solutions exist: (1,5), (2,4), (3,3), (4,2), (5,1)
# First solution with leftmost+ff: X=1, Y=5
initial_state:
  min_val: 1
  max_val: 5
  target_sum: 6
