# LLM-Only Letter Counting Agent (Simple Prompt)
# This agent uses a simple prompt without chain-of-thought.
# More likely to fail on counting tasks.

name: count-letters-llm-simple

state_schema:
  word: str
  letter: str
  answer: str

nodes:
  - name: count
    uses: llm.call
    with:
      model: "gemma3n:e4b"
      temperature: 1
      messages:
        - role: user
          content: |
            How many times does the letter "{{ state.letter }}" appear in the word "{{ state.word }}"?
            Answer with just the number.
    output: llm_response

  - name: format
    run: |
      llm_resp = state.get("llm_response", {})
      if isinstance(llm_resp, dict):
          content = llm_resp.get("content", "unknown")
      else:
          content = llm_resp
      return {
          "answer": f"The letter '{state['letter']}' appears {content.strip()} time(s) in '{state['word']}'"
      }

edges:
  - from: __start__
    to: count
  - from: count
    to: format
  - from: format
    to: __end__
