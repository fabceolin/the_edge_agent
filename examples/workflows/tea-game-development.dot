digraph tea_game_development {
    rankdir=TB;
    compound=true;
    label="TEA-GAME-001 Development Workflow";
    labelloc=t;
    fontsize=16;

    // Phase 1 (Parallel) - Foundational stories with no blocking dependencies
    subgraph cluster_phase_1 {
        label="Phase 1 (Parallel)";
        style=dashed;
        color="#4ade80";

        "TEA_GAME_001_1" [
            label="TEA-GAME-001.1",
            command="python -m the_edge_agent.cli run /home/fabricio/src/spa-base/the_edge_agent/examples/workflows/bmad-story-development.yaml -i '{\"arg\": \"TEA-GAME-001.1\"}'"
        ];

        "TEA_GAME_001_4" [
            label="TEA-GAME-001.4",
            command="python -m the_edge_agent.cli run /home/fabricio/src/spa-base/the_edge_agent/examples/workflows/bmad-story-development.yaml -i '{\"arg\": \"TEA-GAME-001.4\"}'"
        ];
    }

    // Phase 2 - Depends on 001.1
    subgraph cluster_phase_2 {
        label="Phase 2";
        style=dashed;
        color="#60a5fa";

        "TEA_GAME_001_2" [
            label="TEA-GAME-001.2",
            command="python -m the_edge_agent.cli run /home/fabricio/src/spa-base/the_edge_agent/examples/workflows/bmad-story-development.yaml -i '{\"arg\": \"TEA-GAME-001.2\"}'"
        ];
    }

    // Phase 3 - Depends on 001.2
    subgraph cluster_phase_3 {
        label="Phase 3";
        style=dashed;
        color="#c084fc";

        "TEA_GAME_001_3" [
            label="TEA-GAME-001.3",
            command="python -m the_edge_agent.cli run /home/fabricio/src/spa-base/the_edge_agent/examples/workflows/bmad-story-development.yaml -i '{\"arg\": \"TEA-GAME-001.3\"}'"
        ];
    }

    // Phase 4 - Orchestration (depends on all of 001.1-001.4)
    subgraph cluster_phase_4 {
        label="Phase 4";
        style=dashed;
        color="#f97316";

        "TEA_GAME_001_5" [
            label="TEA-GAME-001.5",
            command="python -m the_edge_agent.cli run /home/fabricio/src/spa-base/the_edge_agent/examples/workflows/bmad-story-development.yaml -i '{\"arg\": \"TEA-GAME-001.5\"}'"
        ];
    }

    // Phase 5 - WASM Port (depends on 001.5)
    subgraph cluster_phase_5 {
        label="Phase 5";
        style=dashed;
        color="#ec4899";

        "TEA_GAME_001_6" [
            label="TEA-GAME-001.6",
            command="python -m the_edge_agent.cli run /home/fabricio/src/spa-base/the_edge_agent/examples/workflows/bmad-story-development.yaml -i '{\"arg\": \"TEA-GAME-001.6\"}'"
        ];
    }

    // Phase 6 (Parallel) - UI and Analytics (both depend on 001.6)
    subgraph cluster_phase_6 {
        label="Phase 6 (Parallel)";
        style=dashed;
        color="#14b8a6";

        "TEA_GAME_001_7" [
            label="TEA-GAME-001.7",
            command="python -m the_edge_agent.cli run /home/fabricio/src/spa-base/the_edge_agent/examples/workflows/bmad-story-development.yaml -i '{\"arg\": \"TEA-GAME-001.7\"}'"
        ];

        "TEA_GAME_001_8" [
            label="TEA-GAME-001.8",
            command="python -m the_edge_agent.cli run /home/fabricio/src/spa-base/the_edge_agent/examples/workflows/bmad-story-development.yaml -i '{\"arg\": \"TEA-GAME-001.8\"}'"
        ];
    }

    // Dependencies
    // Phase 1 -> Phase 2
    "TEA_GAME_001_1" -> "TEA_GAME_001_2";

    // Phase 2 -> Phase 3
    "TEA_GAME_001_2" -> "TEA_GAME_001_3";

    // Phase 1, 3, 4 -> Phase 4 (001.5 depends on 001.1, 001.2, 001.3, 001.4)
    "TEA_GAME_001_1" -> "TEA_GAME_001_5";
    "TEA_GAME_001_3" -> "TEA_GAME_001_5";
    "TEA_GAME_001_4" -> "TEA_GAME_001_5";

    // Phase 4 -> Phase 5
    "TEA_GAME_001_5" -> "TEA_GAME_001_6";

    // Phase 5 -> Phase 6
    "TEA_GAME_001_6" -> "TEA_GAME_001_7";
    "TEA_GAME_001_6" -> "TEA_GAME_001_8";
}
