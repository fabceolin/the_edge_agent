# DOC-002.2: Node Specification Extraction

## Status

| Field | Value |
|-------|-------|
| **ID** | DOC-002.2 |
| **Epic** | [DOC-002](./DOC-002-yaml-reference-modularization.md) |
| **Title** | Node Specification Extraction |
| **Type** | Documentation |
| **Priority** | Medium |
| **Status** | Done |
| **Estimated Effort** | 45 minutes |
| **Depends On** | DOC-002.1 |

---

## Story

**As a** YAML agent developer,
**I want** a dedicated document for node specification,
**so that** I can quickly find all node execution methods and options.

---

## Acceptance Criteria

1. **Given** the Node Specification section in YAML_REFERENCE.md
   **When** I extract it to `yaml-reference/nodes.md`
   **Then** all content is preserved including:
   - Basic Structure
   - All 6 execution methods (run, script, Lua, Prolog, uses, steps, while_loop)
   - Fan-In Nodes section

2. **Given** the extracted nodes.md
   **When** I read it
   **Then** it has proper navigation links to related documents

3. **Given** the main YAML_REFERENCE.md
   **When** extraction is complete
   **Then** a summary with link replaces the full content

---

## Tasks / Subtasks

- [x] Extract Node Specification content (AC: 1)
  - [x] Copy "Node Specification" section from YAML_REFERENCE.md
  - [x] Include all subsections:
    - Basic Structure
    - Execution Methods (Method 1-6)
    - Fan-In Nodes
  - [x] Preserve all code examples

- [x] Add navigation and cross-references (AC: 2)
  - [x] Add parent document link header
  - [x] Add "See Also" section with related docs
  - [x] Link to template syntax where Jinja2 is mentioned
  - [x] Link to advanced-runtimes.md for Lua/Prolog details

- [x] Update main YAML_REFERENCE.md (AC: 3)
  - [x] Replace full section with summary
  - [x] Add prominent link to nodes.md
  - [x] Keep anchor for backwards compatibility

---

## Dev Notes

### Content to Extract

From YAML_REFERENCE.md, extract lines approximately covering:
- `## Node Specification` header
- Through end of `### Fan-In Nodes` section

### Summary Template for Main Document

Replace extracted content with:

```markdown
## Node Specification

> **Full documentation:** [yaml-reference/nodes.md](./yaml-reference/nodes.md)

Nodes are the building blocks of YAML agents. Each node represents a workflow step with one of these execution methods:

| Method | Syntax | Description |
|--------|--------|-------------|
| Inline Python | `run:` | Full Python code with state access |
| Script | `script:` | Alias for run (GitLab CI style) |
| Lua | `run:` + `-- lua` | Cross-runtime Lua code |
| Prolog | `language: prolog` | Neurosymbolic AI logic |
| Built-in Action | `uses:` | Pre-built actions |
| Multi-Step | `steps:` | Sequential steps within node |
| While Loop | `type: while_loop` | Iterative execution |

For complete node specification including all options and examples, see [Node Specification](./yaml-reference/nodes.md).
```

### Cross-References to Add in nodes.md

- Template Syntax → `./templates.md`
- Lua details → `./advanced-runtimes.md#lua`
- Prolog details → `./advanced-runtimes.md#prolog`
- Built-in Actions → `./actions/README.md`

---

## Testing

- Verify all code examples render correctly
- Verify all internal links work
- Verify no content lost (diff original vs extracted + summary)

---

## Definition of Done

- [x] `yaml-reference/nodes.md` contains complete node specification
- [x] All code examples preserved and formatted
- [x] Navigation links to related documents work
- [x] Main YAML_REFERENCE.md has summary with link
- [x] No content duplication (only in one place)

---

## Dev Agent Record

| Field | Value |
|-------|-------|
| Agent | Claude Opus 4.5 |
| Date | 2025-12-27 |
| Duration | Part of batch (DOC-002.2-002.5) |
| Files Created | `docs/shared/yaml-reference/nodes.md` (305 lines) |
| Notes | Extracted complete node specification with 6 execution methods |

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-12-27 | 1.0 | Story created | Sarah (PO Agent) |
| 2025-12-27 | 1.1 | Story completed | Claude Opus 4.5 (Dev Agent) |
