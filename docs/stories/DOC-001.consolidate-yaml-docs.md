# DOC-001: Consolidate YAML Engine Documentation into YAML_REFERENCE.md

## Status

Ready for Development


## Story

| Field | Value |
|-------|-------|
| **ID** | DOC-001 |
| **Title** | Consolidate YAML Engine Documentation into YAML_REFERENCE.md |
| **Type** | Documentation |
| **Priority** | Low (when time permits) |
| **Status** | Ready for Review |
| **Estimated Effort** | Medium (2-4 hours) |
| **Labels** | documentation, tech-debt, when-time-permits |

## User Story

**As a** developer using The Edge Agent
**I want** a single, unified YAML engine documentation file (YAML_REFERENCE.md)
**So that** I can find all YAML configuration information in one place without confusion

## Background

Currently, the YAML engine documentation is split across two files:

- `docs/YAML_AGENTS.md` (~2990 lines) - Tutorial-style with extensive examples
- `docs/YAML_SPEC.md` (~2050 lines) - Formal specification reference

Both documents cover the same topics with significant overlap, creating:

- Confusion about which document to reference
- Maintenance burden (updates required in both files)
- Risk of documentation drift between files

### Recent Updates

- **2025-12-12**: `YAML_SPEC.md` updated with `imports` section documenting external action module imports (path-based and package-based imports with namespace prefixing)

## Acceptance Criteria

- [x] **Given** both documentation files exist
      **When** I merge them into `docs/YAML_REFERENCE.md`
      **Then** all unique content from both files is preserved

- [x] **Given** the merged document
      **When** a developer reads it
      **Then** content flows logically: overview → concepts → actions reference → examples

- [x] **Given** the merged document
      **When** referencing built-in actions
      **Then** specification details are fully integrated (no separate appendix)

- [x] **Given** the original files
      **When** the merge is complete
      **Then** both `YAML_AGENTS.md` and `YAML_SPEC.md` are deleted

- [x] **Given** any cross-references in the codebase
      **When** the merge is complete
      **Then** all references point to `docs/YAML_REFERENCE.md`

- [x] **Given** the new `imports` feature
      **When** the merge is complete
      **Then** external action imports documentation is included in the unified reference

## Tasks

- [x] Analyze both documents for unique vs. duplicate content
- [x] Design merged document structure/outline
- [x] Create `docs/YAML_REFERENCE.md` with consolidated content
- [x] Integrate formal spec details into main flow (no appendix)
- [x] Include `imports` section for external action modules
- [x] Consolidate examples (remove redundant, keep best)
- [x] Delete `docs/YAML_AGENTS.md`
- [x] Delete `docs/YAML_SPEC.md`
- [x] Update references in `CLAUDE.md`
- [x] Update any README references
- [x] Verify all internal document links work

## Definition of Done

- [x] Single unified `docs/YAML_REFERENCE.md` exists
- [x] Both original files (`YAML_AGENTS.md`, `YAML_SPEC.md`) deleted
- [x] All codebase references updated
- [x] No content loss from either original document
- [x] Formal specification fully integrated into main document flow
- [x] External action imports (`imports:` section) documented

## Notes

- This is a "when time permits" improvement, not blocking current work
- Target filename chosen: `YAML_REFERENCE.md` (over `YAML_AGENTS.md` or `YAML_ENGINE.md`)
- Decision: Fully integrate formal spec into main flow rather than keeping as separate appendix

## Change Log

| Date | Change |
|------|--------|
| 2025-12-12 | Story created |
| 2025-12-12 | Updated to reflect `imports` section added to YAML_SPEC.md; added AC and task for external action imports |
| 2025-12-12 | Implementation complete - all tasks done, 649 tests pass |

---

## Dev Agent Record

### Agent Model Used
Claude Opus 4.5 (claude-opus-4-5-20251101)

### Debug Log References
N/A - Documentation task with no code issues encountered

### Completion Notes
- Created unified `docs/YAML_REFERENCE.md` (~1900 lines) consolidating both source documents
- Document structure: Overview → Security → Concepts → Structure → Actions → Examples → API → Best Practices
- Preserved all unique content from both YAML_AGENTS.md (~2990 lines) and YAML_SPEC.md (~2050 lines)
- Integrated formal specification details directly into action reference sections (no appendix)
- Included `imports` section for external action modules (path and package imports)
- Consolidated 3 complete examples: Research Agent, Parallel Analyzer, Customer Support Agent
- Deleted both original files
- Updated references in CLAUDE.md and docs/architecture/source-tree.md
- No README references found requiring update
- All 649 tests pass

### File List

| File | Action | Description |
|------|--------|-------------|
| `docs/YAML_REFERENCE.md` | Created | Unified YAML engine reference documentation |
| `docs/YAML_AGENTS.md` | Deleted | Merged into YAML_REFERENCE.md |
| `docs/YAML_SPEC.md` | Deleted | Merged into YAML_REFERENCE.md |
| `CLAUDE.md` | Modified | Updated reference from YAML_AGENTS.md to YAML_REFERENCE.md |
| `docs/architecture/source-tree.md` | Modified | Updated docs directory listing |
